{"version":3,"sources":["../../src/functions/configure_llm_fn.ts"],"sourcesContent":["import { GSContext, GSStatus } from \"@godspeedsystems/core\";\r\nimport fs from \"fs\";\r\nimport path from \"path\";\r\n\r\nexport default async function(ctx: GSContext): Promise<GSStatus> {\r\n  const { apiKey, model } = ctx.inputs.data.body;\r\n  const envPath = path.resolve(process.cwd(), \".env\");\r\n\r\n  let envContent = fs.readFileSync(envPath, \"utf-8\");\r\n  envContent = envContent\r\n    .replace(/OPENROUTER_API_KEY=.*/g, `OPENROUTER_API_KEY=${apiKey}`)\r\n    .replace(/MODEL_NAME=.*/g, `MODEL_NAME=${model}`);\r\n\r\n  if (!envContent.includes(\"OPENROUTER_API_KEY=\")) {\r\n    envContent += `\\nOPENROUTER_API_KEY=${apiKey}`;\r\n  }\r\n  if (!envContent.includes(\"MODEL_NAME=\")) {\r\n    envContent += `\\nMODEL_NAME=${model}`;\r\n  }\r\n\r\n  fs.writeFileSync(envPath, envContent);\r\n  return new GSStatus(true, 200, undefined, \"LLM configuration updated\");\r\n}\r\n"],"names":["ctx","apiKey","model","inputs","data","body","envPath","path","resolve","process","cwd","envContent","fs","readFileSync","replace","includes","writeFileSync","GSStatus","undefined"],"mappings":";;;;+BAIA;;;eAAA;;;sBAJoC;2DACrB;6DACE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEF,SAAf,SAA8BA,GAAc;;QAC1C,MAAM,EAAEC,MAAM,EAAEC,KAAK,EAAE,GAAGF,IAAIG,MAAM,CAACC,IAAI,CAACC,IAAI;QAC9C,MAAMC,UAAUC,aAAI,CAACC,OAAO,CAACC,QAAQC,GAAG,IAAI;QAE5C,IAAIC,aAAaC,WAAE,CAACC,YAAY,CAACP,SAAS;QAC1CK,aAAaA,WACVG,OAAO,CAAC,0BAA0B,CAAC,mBAAmB,EAAEb,QAAQ,EAChEa,OAAO,CAAC,kBAAkB,CAAC,WAAW,EAAEZ,OAAO;QAElD,IAAI,CAACS,WAAWI,QAAQ,CAAC,wBAAwB;YAC/CJ,cAAc,CAAC,qBAAqB,EAAEV,QAAQ;QAChD;QACA,IAAI,CAACU,WAAWI,QAAQ,CAAC,gBAAgB;YACvCJ,cAAc,CAAC,aAAa,EAAET,OAAO;QACvC;QAEAU,WAAE,CAACI,aAAa,CAACV,SAASK;QAC1B,OAAO,IAAIM,cAAQ,CAAC,MAAM,KAAKC,WAAW;IAC5C"}